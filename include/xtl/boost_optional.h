///////////////////////////////////////////////////////////////////////////////
//
//	Description: Contains composite functions for boost optional library
//
///////////////////////////////////////////////////////////////////////////////
#pragma once
///////////////////////////////////////////////////////////////////////////////
#include "objio.h"
#include <boost/optional.hpp>
///////////////////////////////////////////////////////////////////////////////
template<typename T, typename Format, typename References>
void composite(obj_output<Format, References>& stream, boost::optional<T>& o)
{
	bool b = static_cast<bool>(o);
	stream.simple(b);
	if ( b )
		stream.simple(o.get());
}
///////////////////////////////////////////////////////////////////////////////
template<typename T, typename Format, typename References>
void composite(obj_input<Format, References>& stream, boost::optional<T>& o)
{
	bool b;
	stream.simple(b);
	if ( b )
	{
		o = T();
		stream.simple(o.get());
	}
}
///////////////////////////////////////////////////////////////////////////////
